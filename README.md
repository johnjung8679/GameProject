Weather Yacht
=============

날씨 테마가 게임플레이에 직접 반영되는 요트 다이스 게임입니다. 입력한 도시의 현재 날씨를 불러와 배경색과 찬스 스킬이 바뀌고, 최대 4명이 번갈아 주사위를 굴려 점수를 채웁니다.

목차
- 소개
- 주요 기능
- 날씨별 찬스 스킬
- 조작법과 UI 팁
- 기술 구현 상세
- 환경 설정 및 실행 (uv 기준)
- 문제 해결
- 변경 기록

소개
- 입력한 도시(또는 자동 감지된 위치)의 날씨/기온을 표시하고, 해당 날씨에 맞춰 테마와 스킬이 적용됩니다.
- 요트(Yahtzee) 규칙에 맞춰 카테고리를 채우며 점수를 경쟁합니다.
- 실행 후 `requests`가 없으면 자동 설치 안내가 뜨며, 설치 실패 시 메시지 박스로 알려줍니다.

주요 기능
- 위치 감지: IP 기반 자동 위치 감지 버튼 제공.
- 날씨 연동: Open-Meteo 지오코딩/날씨 API로 현재 기온과 날씨 코드 조회.
- 테마 & 스킬: 날씨에 따라 배경/글자 색상과 찬스 스킬이 변동.
- 점수 예상: 카테고리 버튼에 굴린 주사위 기준 예상 점수를 실시간 표기.
- 스코어보드: 플레이어별 점수표와 총점 표시, 세로/가로 스크롤 지원.
- 조작성: 주사위 클릭으로 홀드/해제, 최대 3회 굴림. F11 전체 화면, Esc 해제.
- 접근성: 카테고리/스코어보드 영역은 마우스 휠로 세로 스크롤, Shift+휠로 가로 스크롤.

날씨별 찬스 스킬
- 맑음(sunny): 한 주사위를 6으로 고정.
- 흐림(cloudy): 선택한 최대 2개의 주사위를 재굴림.
- 비(rain): 다음 기록 점수에 +5점 보너스.
- 눈(snow): 선택한 2개 주사위 값을 교환.
- 폭풍(storm): 모든 주사위를 강제 재굴림(굴림 횟수 소모 무시).
각 플레이어는 자신의 턴 중 찬스를 1회만 사용할 수 있습니다.

조작법과 UI 팁
- 주사위 굴리기: 버튼으로 굴리고, 원하는 주사위를 클릭해 홀드/해제합니다(최대 3회 굴림).
- 카테고리 기록: 비어 있는 카테고리 버튼을 눌러 점수를 확정합니다.
- 스크롤: 카테고리/스코어보드 영역에서 휠로 세로, Shift+휠로 가로 이동.
- 전체 화면: F11 토글, Esc 해제.
- 규칙 보기: 게임 화면 상단 버튼으로 룰 팝업 확인.

기술 구현 상세
항목 | 내용
--- | ---
비동기 처리 | 네트워크 호출은 UI 스레드에서 진행하지만, 로딩 Toplevel과 진행바로 사용자 피드백을 제공.
성능 최적화 | 주사위/버튼 렌더링을 최소화하고, 스크롤 영역을 Canvas+Frame으로 구성해 카테고리/스코어보드 스크롤을 분리.
코드 구조 | 단일 파일(`weather_yacht.py`)의 `WeatherYachtApp` 클래스로 UI/로직을 관리. 점수 계산은 `calculate_score` 함수, 날씨 분류는 `classify_weather`.
환경 재현 | `pyproject.toml`과 `uv.lock`을 포함해 uv로 동일한 Python 환경을 재현 가능.
요청 라이브러리 | `requests`를 필요 시 자동 설치(실패 시 안내).

환경 설정 및 실행 (uv 기준)
필수 조건: Python 3.12+

1) 의존성 설치
```bash
uv sync
```
2) 실행
```bash
uv run python weather_yacht.py
```

pip로 실행하려면?
```bash
python -m venv .venv
source .venv/bin/activate      # Linux/macOS
.venv\Scripts\activate         # Windows
pip install -r <(uv export --format requirements.txt)  # uv 설치 시
# 또는 직접
pip install requests
python weather_yacht.py
```

문제 해결
- API 실패: 네트워크/SSL 문제로 Open-Meteo 요청이 실패하면 메시지 박스가 뜹니다. 다른 네트워크에서 재시도하거나 VPN/프록시를 확인하세요.
- 위치 감지 실패: IP-API 요청이 막히면 도시명을 직접 입력하고 시작하세요.
- 화면이 잘리지 않음: 카테고리/스코어보드 모두 스크롤 가능. 전체 화면(F11)으로 넓게 볼 수 있습니다.

변경 기록
- 0.2.3
  - 카테고리 영역 가로 스크롤 및 Shift+휠 이동 추가
  - 문서/버전 정리
- 0.2.2
  - 날씨 기반 테마와 찬스 스킬 추가
  - 점수판 및 예상 점수 표기
- 0.2.0
  - 초기 공개
